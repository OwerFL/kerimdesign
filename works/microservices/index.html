<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Kerim Novruzov">
		<meta name="description" content="WEB –¥–∏–∑–∞–π–Ω–µ—Ä, –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏ UI/UX –¥–∏–∑–∞–π–Ω–µ—Ä –∏–∑ –ö–∞–∑–∞–Ω–∏.">
		<link rel="apple-touch-icon" sizes="180x180" href="../../fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../fav/favicon-16x16.png">
    <link rel="manifest" href="../../fav/site.webmanifest">
    <link rel="mask-icon" href="../../fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#080809">
    <meta property="og:title" content="Kerim Novruzov | Designer">
    <meta property="og:site_name" content="kerim.ru">
    <meta property="og:url" content="kerim.ru">
    
    <meta property="og:description" content="WEB –¥–∏–∑–∞–π–Ω–µ—Ä, –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏ UI/UX –¥–∏–∑–∞–π–Ω–µ—Ä –∏–∑ –ö–∞–∑–∞–Ω–∏.">
    <meta property="og:type" content="website">
    
    <meta property="og:image" content="kerim.ru">
    <title>Kerim Novruzov | –ê–π–¥–µ–Ω—Ç–∏–∫–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏</title>
    
    <link rel="stylesheet" href="../../scss/main.min.1a56c6578ccdf98b60762f7a7e238611cc9d061a77cd881b1d90fda97d49dc31.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MVK5XFVQZ2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-MVK5XFVQZ2', { 'anonymize_ip': true });
    </script>
</head>
<body  class="page"  data-barba="wrapper">
    
<main class="relative" data-barba="container" data-barba-namespace="home">
    <div class="z-index-max relative">
        <div class="container">
            <header class="page-header">
                <div class="site-top-menu relative">
                    
									<a href="../../index.html" aria-label="Kerim's logo" class="site-logo site-logo__large" aria-current="page">
										<svg width="758" height="71" viewBox="0 0 750 70" version="1.1" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M0.680001 71V0.247995H12.68V35.576L43.592 0.247995H57.704L31.688 30.488L57.704 71H43.112L23.336 40.088L12.68 52.376V71H0.680001ZM73.4585 71L62.8025 60.344V31.544L73.4585 20.792H96.4985L107.155 31.544V50.168H74.4185V57.272L78.6425 61.496H106.291V71H73.4585ZM74.4185 41.24H95.5385V34.04L91.3145 29.816H78.6425L74.4185 34.04V41.24ZM120.575 71V20.792H132.191V29.72L141.215 20.792H152.543V32.408H141.311L132.191 41.528V71H120.575ZM160.7 15.32V3.32H172.316V15.32H160.7ZM160.7 71V20.792H172.316V71H160.7ZM186.763 71V20.792H198.379V29.72L207.403 20.792H225.355L234.283 29.816L243.307 20.792H261.259L271.915 31.544V71H260.299V34.232L256.267 29.816H246.091L236.01 39.896V71H224.395V34.232L220.363 29.816H210.187L198.379 41.528V71H186.763ZM309.118 71V0.247995H324.574L352.606 49.688V0.247995H364.702V71H351.55L323.518 21.56H321.118V71H309.118ZM389.302 71L378.646 60.344V31.544L389.302 20.792H414.454L425.11 31.544V60.344L414.454 71H389.302ZM394.486 62.072L409.27 61.976L413.494 57.752V34.04L409.27 29.816H394.486L390.262 34.04V57.752L394.486 62.072ZM451.402 71L429.898 20.792H442.666L457.161 59.576H459.466L473.962 20.792H486.73L465.13 71H451.402ZM494.919 71V20.792H506.535V29.72L515.559 20.792H526.887V32.408H515.655L506.535 41.528V71H494.919ZM545.22 71L534.564 60.344V20.792H546.18V57.56L550.212 61.976H559.908L570.084 51.992V20.792H581.7V71H570.084V63.8L562.788 71H545.22ZM594.155 71V60.344L623.147 30.296H596.171V20.792H637.355V31.544L608.363 61.496H638.027V71H594.155ZM659.677 71L649.021 60.344V31.544L659.677 20.792H684.829L695.485 31.544V60.344L684.829 71H659.677ZM664.861 62.072L679.645 61.976L683.869 57.752V34.04L679.645 29.816H664.861L660.637 34.04V57.752L664.861 62.072ZM721.777 71L700.273 20.792H713.041L727.536 59.576H729.841L744.337 20.792H757.105L735.505 71H721.777Z" fill="white"/>
										</svg>
									</a>
                    <div onclick="window.history.back()" class="page-back-button pointer" aria-label="Back to homepage">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
                        </svg>                          
                    </div>
                </div>
                <h1 class="page-title">–ê–π–¥–µ–Ω—Ç–∏–∫–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏</h1>
            </header>
        </div>
        <div class="page-content">
            <div class="container">
                <div class="page-grid">
                    <div class="page-grid-pre">
                        <span class="page-grid-number">01</span>
                    </div>
                    <div class="page-grid-content">
                        <h2 id="context">Context</h2>
<p>During my semester of enterprise software engineering I chose to build a social media platform. Particularly because I was interested to build and scale a timeline of many posts combined so that every user has a personalized feed. I also wanted to learn more about microservices and how to scale them. There were some interesting system design challenges at hand like scaling a timeline where 3000 users made 50-150 posts within the span on 30 seconds. Each used also had between 1 and 300 followers.</p>
<h2 id="architecture">Architecture</h2>
<p>Below is a basic overview of the architecture I built. Each service is composed using ASP.NET Core 6 webapi following either a CQRS based architecture or a layered one (depending on complexity of the service). For messaging I chose to use RabbitMQ because it fit the usecase well based on the fact that it wasn&rsquo;t sure where the architecture would end up and there was no non-functional requirement that would need streaming. Each service uses the MassTransit library to interact with RabbitMQ. I mostly used topic exchanges.

  <figure class="mt-1">
    <img src="../../microservice-architecture.jpg" alt="Architecture">
    <figcaption class="text-small text-center">Basic overview of the architecture</figcaption>
  </figure>
</p>
<h3 id="devops">DevOps</h3>
<p>For DevOps I used CircleCI, largely due to their free credits. Though it requires an educated guess for how long this will remain free due to crypto miners using CI/CD credits (<a href="https://dev.to/n3wt0n/crypto-mining-is-killing-all-free-ci-cd-platforms-4chc" target="_blank" rel="noopener">source</a>).
The CI/CD pipeline would listen to specific folders in the project changing instead of building everything. This is because I used a monorepo as it was still a relatively small microservice and it made it easier for me to stick to DRY as much as possible.</p>
<p>The pipeline ran tests and did QA using self-hosted sonarqube. Though the pipeline did not automatically update the pods, it did build a working image in the registry. This allowed me to update the pods manually when I wanted to.</p>
<h3 id="post-service">Post service</h3>
<p>This service is build up using Command Query Responsibility Segregation (CQRS). MediatR is used to handle the commands and queries. The service is responsible for creating and deleting posts. It also has a query endpoint that returns a post by id. The database used for this service is MySQL. I also made a different Event Sourcing implementation where I used a read and write database. The read database being MySQL which contained the latest posts and the write database being MongoDB where it stored all the posts as events. This allowed me to have the ability to play back events thus creating eventual consistency.</p>
<h3 id="timeline-service">Timeline service</h3>
<p>Following the non-functional requirements, I wanted to build a timeline that would show you posts of your followers at fast speeds, though new posts did not have to appear straight away.
<br>
<br>
To solve this problem I chose Redis as a data store for the timelines and used an event driven architecture to build up the timelines. A <code>KweetPostedEvent</code> is consumed by the timeline service through RabbitMQ. The timeline service then sends out a request-response to the social service also through RabbitMQ, this is fine because the operation will not affect any get requests to the timeline.
<br>
<br>
The timeline service now has the post and a list of people who should receive it. It will update the timeline of each user, which is a list, in a O(n) operation. This is not ideal and could be replaced by a more efficient datastructure like a double linked list. The maximum amount of posts per user is 20.
<br>
<br>
There is one issue left which is users with a huge following creating a new post. I&rsquo;m aware of the issue but did not solve it because there was no obvious solution at that moment. Though if you&rsquo;re reading this and have a suggestion, please let me know üòâ <a href="mailto:hi@rayco.digital">hi@rayco.digital</a></p>
<h3 id="social-service">Social service</h3>
<p>This service is build up using a layered architecture. To store users and followers I used a graph database called Neo4j. I chose the graph datastructure because it easily allows to get closely related people, similar to LinkedIn showing 1de, 2de and 3de users. This service listened to the integration event from the auth service to create a new user. It also responds to the timeline service to get the followers of a user.</p>
<h2 id="messaging-with-rabbitmq">Messaging with RabbitMQ</h2>
<p>Below you can see an example of how I used MassTransit to implement messaging.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#75715e">// program.cs
</span><span style="color:#75715e"></span>
builder.Services.AddMassTransit(config =&gt;
{
    config.AddConsumer&lt;RequestFollowersConsumer&gt;();
    config.AddConsumer&lt;RegisterEventConsumer&gt;();
    config.UsingRabbitMq((ctx, cfg) =&gt;
    {
        cfg.Host(builder.Configuration[<span style="color:#e6db74">&#34;EventBusSettings:HostAddress&#34;</span>]);
        cfg.ReceiveEndpoint(EventBusConstants.GetRequestFollowersConsumer, c =&gt;
        {
            c.ConfigureConsumer&lt;RequestFollowersConsumer&gt;(ctx);
        });

        cfg.ReceiveEndpoint(builder.Configuration[<span style="color:#e6db74">&#34;EventBusSettings:QueueName&#34;</span>], e =&gt;
        {
            e.UseRawJsonDeserializer();
            e.Bind(<span style="color:#e6db74">&#34;amq.topic&#34;</span>, x =&gt;
            {
                <span style="color:#75715e">// KK.EVENT.CLIENT.master.SUCCESS.kwetter-frontend.REGISTER
</span><span style="color:#75715e"></span>                x.RoutingKey = builder.Configuration[<span style="color:#e6db74">&#34;EventBusSettings:RoutingKey&#34;</span>]; 
                x.ExchangeType = <span style="color:#e6db74">&#34;topic&#34;</span>;
                }
            ) ;

            e.ConfigureConsumer&lt;RegisterEventConsumer&gt;(ctx);
        });
    });
});
</code></pre></div><hr>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#75715e">// RegisterEventConsumer.cs
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RegisterEventConsumer</span> : IConsumer&lt;EventClientNotificationMqMsg&gt;
{
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ILogger&lt;RegisterEventConsumer&gt; <span style="color:#ae81ff">_l</span>ogger;
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IFollowService <span style="color:#ae81ff">_f</span>ollowService;

    <span style="color:#66d9ef">public</span> RegisterEventConsumer(ILogger&lt;RegisterEventConsumer&gt; logger, IFollowService followService)
    {
        <span style="color:#ae81ff">_l</span>ogger = logger;
        <span style="color:#ae81ff">_f</span>ollowService = followService;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">async</span> Task Consume(ConsumeContext&lt;EventClientNotificationMqMsg&gt; context)
    {
        <span style="color:#66d9ef">var</span> username = context.Message.Details.Username;
        <span style="color:#66d9ef">var</span> userId = context.Message.UserId;

        <span style="color:#66d9ef">var</span> id = <span style="color:#66d9ef">new</span> Guid(userId);
        <span style="color:#66d9ef">var</span> user = <span style="color:#66d9ef">new</span> UserDto { Id = id, UserName = username };

        <span style="color:#66d9ef">try</span>
        {
            <span style="color:#66d9ef">await</span> <span style="color:#ae81ff">_f</span>ollowService.CreateUserNode(user);
        }
        <span style="color:#66d9ef">catch</span>(UserNodeCreationException e)
        {
            <span style="color:#ae81ff">_l</span>ogger.LogError(<span style="color:#e6db74">$&#34;Failed to create user {userId} as node. Reason: {e.Message}&#34;</span>);
        }
    }
}
</code></pre></div><h2 id="google-cloud-platform">Google Cloud Platform</h2>
<p>I scaled a microservice architecture on Google Cloud Platform using GKE (Google Kubernetes Engine). For the purpose of deploying, administering, and growing containerized applications using Kubernetes, GKE provides a fully managed, scalable, and secure environment.
<br>
<br>
For this educational project, the cluster used spot instances on many nodes to keep expenses low. To ensure maximum availability, the gateway was available on each node. The timeline and Keycloak service were also both kept at a high level of availability. Not implying the rest had bad availability.
<br>
<br>
The microservices were managed using Kubernetes. The services were able to scale both horizontally and vertically successfully, according to the load test performed using Locust. While keeping costs down, a highly available, scalable solution was made possible through the usage of GKE. These technologies offered a solid management foundation for the microservices, ensuring top performance.</p>
<h2 id="frontend">Frontend</h2>
<p>The frontend is made with Svelte and TailwindCSS. To consume the API I used Axios. The frontend is hosted on Google Cloud Storage and is served through a CDN and loadbalancer.</p>

                    </div>
                    <div class="page-grid-links">
                        
                        
                        <a href="https://github.com/raycohaex/kwetter-microservice" class="page-grid-link" target="_blank" rel="noreferrer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                            <span>Sourcecode</span>
                        </a>
                        
                    </div>
                </div>
            </div>
            <footer class="single-footer">
							<div class="container">
									<div class="page-grid">
											<div class="page-grid-pre">
													<div onclick="window.history.back()" class="page-back-button pointer" aria-label="Back to homepage">
															<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
																	<path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
															</svg>                          
													</div>
											</div>
											<div class="page-grid-content">
													<div id="single-get-in-touch">
															<h2>–î–∞–≤–∞–π—Ç–µ —Å–≤—è–∂–µ–º—Å—è</h2>
															<div class="contact-options">
    <a href="https://t.me/owerfl" class="contact-option" target="_blank" rel="noreferrer" aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –º–Ω–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º">
        <div class="contact-option__button pulse-hover">
					<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-telegram" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"> <path stroke="none" d="M0 0h24v24H0z" fill="none"/> <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /> </svg>
        </div>
        
    </a>
    <a href="https://www.behance.net/owerfl" class="contact-option" target="_blank" rel="noreferrer" aria-label="–ì–ª—è–Ω—É—Ç—å –ë–µ—Ö–∞–Ω—Å">
			<div class="contact-option__button pulse-hover">
				<svg enable-background="new 0 0 64 64" height="64px" id="Layer_1" version="1.1" viewBox="0 0 64 64" width="64px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M28.068,27.86c0-1.9-1.293-1.9-1.293-1.9h-0.685h-4.634h-0.002v4.078h4.991C27.308,30.038,28.068,29.763,28.068,27.86z"/><path d="M40.394,30.038c-2.822,0-3.215,2.816-3.215,2.816h6.003C43.182,32.854,43.219,30.038,40.394,30.038z"/><path d="M26.775,32.854h-5.318v4.884h4.711c0.08,0,0.198,0.004,0.339,0c0.757-0.017,2.196-0.235,2.196-2.374   C28.703,32.83,26.775,32.854,26.775,32.854z"/><path d="M32,7.174C18.311,7.174,7.174,18.311,7.174,32c0,13.689,11.137,24.826,24.826,24.826c13.689,0,24.826-11.137,24.826-24.826   C56.826,18.311,45.689,7.174,32,7.174z M36.392,23.789h7.54v2.251h-7.54V23.789z M32.581,35.593c0,5.577-5.806,5.394-5.806,5.394   h-5.318h-0.156h-4.034V22.712h4.034h0.156h5.318c2.891,0,5.172,1.597,5.172,4.867c0,3.269-2.788,3.477-2.788,3.477   C32.834,31.056,32.581,35.593,32.581,35.593z M46.685,35.293h-9.47c0,3.396,3.216,3.181,3.216,3.181c3.037,0,2.93-1.965,2.93-1.965   h3.218c0,5.217-6.254,4.859-6.254,4.859c-7.503,0-7.021-6.985-7.021-6.985s-0.006-7.022,7.021-7.022   C47.722,27.361,46.684,35.293,46.685,35.293z"/></g></svg>
			</div>
		</a>
    <a href="mailto:oowerfl@gmail.com" class="contact-option" target="_blank" rel="noreferrer" aria-label="–ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ">
			<div class="contact-option__button pulse-hover">
					<svg id="contact-option-email" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
							<path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
					</svg>
			</div>
		</a>
</div></div>
											</div>
									</div>
							</div>
							<div id="single-footer-gradients">
									<div id="single-footer-gradient-1" class="single-footer__gradient"></div>
									<div id="single-footer-gradient-2" class="single-footer__gradient"></div>
									<div id="single-footer-gradient-3" class="single-footer__gradient"></div>
							</div>
							<div class="single-footer-closure">2023 portfolio - designed & developed by Kerim Novruzov</small>
					</footer>
        </div>
    </div>
    <div class="gradients">
        <div class="gradient purple" id="gradient-1"></div>
        <div class="gradient purple" id="gradient-2"></div>
        <div class="gradient purple" id="gradient-3"></div>
        <div class="gradient blue" id="gradient-4"></div>
    </div>
</main>

    
    


<script src="../../js/bundle.js@v=1"></script>



<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "articleSection": "works",
    "name": "UI/UX",
    "headline": "UI/UX",
    "alternativeHeadline": "",
    "description": "UI/UX works",
    "inLanguage": "ru",
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/kerim.ru\/works\/uiux2\/"
    },
    "author" : {
        "@type": "Person",
        "name": ""
    },
    "creator" : {
        "@type": "Person",
        "name": ""
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": ""
    },
    "copyrightHolder" : "Kerim Novruzov",
    "copyrightYear" : "2023",
    "publisher":{
        "@type":"Organization",
        "name": Kerim Novruzov designer,
        "url": "https://kerim.ru",
    },
    "image": "https://kerim.ru",
    "url" : "https:\/\/kerim.ru\/works\/uiux2\/",
    "wordCount" : "1001",
    "genre" : [ ],
    "keywords" : [ ]
}
</script>

</body>
</html>